<div class="card">
    {% partial 'app/head-title' no_back_url=true backlink=back_link_url title="Lakukan Pembayaran Anda" %}
    
    <div class="card-body checkout text-center">
      <img src="{{ payment_method.logo.getPath() }}">
      <div class="row payment-box">
        
        {% partial 'app/payment-page/time-limit' %}

        <div class="va-info">
          <p class="invoice-title">Virtual Account</p>
          <div class="input-group mb-3">
            <span class="form-control" id="virtualAccount">{{ va_number }}</span>
            <button class="btn btn-secondary btn-sm" type="button" id="copyVirtualAccount">Copy</button>
          </div>
        </div>
        
        <div class="va-info">
          <p class="invoice-title">Total Tagihan</p>
          <div class="input-group mb-3">
            <span class="form-control" id="chargeAmount">{{ amount_charged | number_format(0) }}</span>
            <button class="btn btn-secondary btn-sm" type="button" id="copyChargeAmount">Copy</button>
          </div>
        </div>
      </div>
  
      
      <div class="va-info" id="payment-status">
        {% partial 'app/payment-status' %}
      </div>
  
      {% partial 'app/payment-page/btn-check-status' %}
  
      <div class="text-start mt-4">
        <div class="text-muted">INFO</div>
        <small>Pembayaran akan otomatis terverifikasi paling lambat 10 menit setelah transaksi berhasil.</small>
      </div>
  
      <div class="text-muted text-start mt-3 mb-2">Cara Pembayaran</div>
      <div class="accordion text-start" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              ATM
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="accord-content">
                <ol class="how-to">
                    <li>Masukkan kartu ATM dan PIN</li>
                    <li>Pilih Pembayaran Melalui VA</li>
                    <li>Masukkan <strong>70012</strong> sebagai kode perusahaan Midtrans, lalu pilih <strong>Benar</strong></li>
                    <li>Masukkan 12 kode pembayaran <strong>{{ va_number }}  </strong>, lalu pilih tombol <strong>Benar</strong></li>
                    <li>Masukkan Angka <strong>1</strong> untuk memilih tagihan, lalu pilih tombol <strong>Ya</strong></li>
                    <li>Akan muncul konfirmasi pembayaran, lalu pilih tombol <strong>Ya</strong></li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Internet Banking
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <ol class="how-to">
                <li>Buka website bank yang Anda gunakan</li>
                <li>Masukkan User ID dan PIN Internet Banking</li>
                <li>Lakukan pembayaran menggunakan VA</li>
                <li>Masukkan 12 kode pembayaran <strong>{{ va_number }}</strong>, lalu pilih <strong>Lanjutkan</strong></li>
                <li>Pastikan detail pembayaran sudah sesuai lalu pilih <strong>Lanjutkan</strong></li>
                <li>Validasi pembayaran dengan memasukkan PIN lalu klik <strong>Kirim</strong></li>
              </ol>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              Mobile Banking  
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <ol class="how-to">
                <li>Lakukan log in pada aplikasi Mobile Banking bank yang Anda gunakan</li>
                <li>Pada Penyedia Jasa pilih <strong>Midtrans</strong></li>
                <li>Pada Kode Bayar masukkan 12 kode pembayaran <strong>{{ va_number }}</strong>, lalu pilih <strong>Lanjut</strong></li>
                <li>Setelah muncul tagihan, pilih <strong>Konfirmasi</strong></li>
                <li>Masukkan PIN</li>
                <li>Pembayaran selesai. Simpan notifikasi yang muncul sebagai bukti pembayaran</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

{% put scripts %}
<script>
$(document).ready(function () {
    $("#copyVirtualAccount").click(function () {
    var virtualAccount = $("#virtualAccount").text();
    navigator.clipboard.writeText(virtualAccount).then(function () {
        alert("Virtual Account copied to clipboard: " + virtualAccount);
    }).catch(function () {
        alert("Unable to copy Virtual Account to clipboard.");
    });
    });

    $("#copyChargeAmount").click(function () {
    var chargeAmount = $("#chargeAmount").text();
    navigator.clipboard.writeText(chargeAmount).then(function () {
        alert("Charge Amount copied to clipboard: " + chargeAmount);
    }).catch(function () {
        alert("Unable to copy Charge Amount to clipboard.");
    });
    });
});
</script>
{% endput %}
